<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi34 { color: #0000aa; }
.ansi36 { color: #00aaaa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: 80%;" >
<pre class="ansi2html-content">

<span class="ansi36">&lt;&lt;&lt; Starting walkthrough tests of encapsia-cli &gt;&gt;&gt;</span>
These are *not* self-verifying tests, so check the output for reasonableness!

<span class="ansi34">=== Print out overall help ===</span>
&gt;encapsia help
<span class="ansi33">Usage: encapsia help [OPTIONS] COMMAND [ARGS]...

  CLI to talk to an encapsia host.

  Options can be provided in one of three ways, in this priority order:

  1. On the command line as an --option.
  2. In an environment variable as ENCAPSIA_&lt;OPTION&gt; or ENCAPSIA_&lt;SUBCOMMAND&gt;_&lt;OPTION&gt;.
  3. In your config file located at ~/.encapsia/config.toml

  If the config file does not exist then it will be created with
  documentation and defaults.

  Although not needed by all the sub-commands, the host is so frequently
  used that it is a top level option.

  When needed, the following steps are used to determine the server URL and
  token:

  If provided, use the --host option to reference an entry in ~/.encapsia/credentials.toml
  Else if set, use ENCAPSIA_HOST to reference an entry in ~/.encapsia/credentials.toml
  Else if set, take the top level `host` option from ~/.encapsia/config.toml
  Else if set, use ENCAPSIA_URL and ENCAPSIA_TOKEN directly.
  Else abort.

  The tool will also abort if instructed to lookup in
  ~/.encapsia/credentials.toml but cannot find a correct entry.

Options:
  --colour [always|never|auto]  Control colour on stdout.
  --host TEXT                   Name to use to lookup credentials in
                                .encapsia/credentials.toml

  --silent                      Suppress normal output.
  --help                        Show this message and exit.

Commands:
  completion  Manage shell completions.
  config      Get/set server configuration.
  database    Backups and Restore encapsia databases.
  fixtures    Manage database fixtures.
  help        Print longer help information about the CLI.
  httpie      Launch an httpie interactive shell with passed-in credentials.
  plugins     Install, uninstall, create, and update plugins.
  run         Run an Encapsia task, job, or view.
  schedule    Manage task schedules.
  shell       Start an interactive shell for running the encapsia commands.
  token       Do things with an encapsia token.
  users       Manage users, including superuser and system users.
  version     Print version information and exit.</span>
<span class="ansi33"></span>
<span class="ansi33">Subcommands:</span>
<span class="ansi33">  completion install                  Install the click-completion-command...</span>
<span class="ansi33">  completion show                     Show the click-completion-command completion...</span>
<span class="ansi33">  config delete                       Delete value against given key.</span>
<span class="ansi33">  config get                          Retrieve value against given key.</span>
<span class="ansi33">  config load                         Load (merge) configuration from given file.</span>
<span class="ansi33">  config save                         Save entire configuration to given file.</span>
<span class="ansi33">  config set                          Store value against given key.</span>
<span class="ansi33">  config show                         Show entire configuration.</span>
<span class="ansi33">  database backup                     Backup database to given filename.</span>
<span class="ansi33">  database restore                    Restore database from given backup file.</span>
<span class="ansi33">  fixtures create                     Create new fixture with given name.</span>
<span class="ansi33">  fixtures delete                     Delete fixture with given name.</span>
<span class="ansi33">  fixtures list                       List available fixtures.</span>
<span class="ansi33">  fixtures use                        Switch to fixture with given name.</span>
<span class="ansi33">  plugins add                         Add plugin(s) to local store from file, URL,...</span>
<span class="ansi33">  plugins dev-build                   Build plugins from given source directories.</span>
<span class="ansi33">  plugins dev-create                  Create namespace of given name.</span>
<span class="ansi33">  plugins dev-destroy                 Destroy namespace(s) of given name.</span>
<span class="ansi33">  plugins dev-list                    Print information about the namespace usage...</span>
<span class="ansi33">  plugins dev-update                  Update plugin parts which have changed since...</span>
<span class="ansi33">  plugins freeze                      Print currently installed plugins as versions...</span>
<span class="ansi33">  plugins install                     Install/upgrade plugins by name, from files,...</span>
<span class="ansi33">  plugins logs                        Print the latest install logs for given...</span>
<span class="ansi33">  plugins ls                          Print information about plugins in local...</span>
<span class="ansi33">  plugins status                      Print information about (successfully)...</span>
<span class="ansi33">  plugins uninstall                   Uninstall named plugin(s).</span>
<span class="ansi33">  plugins upstream                    Print information about plugins on S3.</span>
<span class="ansi33">  run job                             Run a job in given plugin NAMESPACE and...</span>
<span class="ansi33">  run task                            Run a task in given plugin NAMESPACE and...</span>
<span class="ansi33">  run view                            Run a view in given plugin NAMESPACE and...</span>
<span class="ansi33">  schedule add                        Add new scheduled task.</span>
<span class="ansi33">  schedule list                       List all scheduled tasks.</span>
<span class="ansi33">  schedule remove-task                Remove scheduled task by id.</span>
<span class="ansi33">  schedule remove-tasks-in-namespace  Remove all scheduled tasks in given...</span>
<span class="ansi33">  token env                           Generate shell commands to populate encapsia...</span>
<span class="ansi33">  token expire                        Expire token from server, and update encapsia...</span>
<span class="ansi33">  token extend                        Extend the lifespan of token and update...</span>
<span class="ansi33">  token transfer                      Get a token for `user` (subject to proper...</span>
<span class="ansi33">  token whoami                        Print information about current owner of...</span>
<span class="ansi33">  users add-superuser                 Create superuser with suitable user and role.</span>
<span class="ansi33">  users add-systemuser                Create system user with suitable user and...</span>
<span class="ansi33">  users delete                        Delete user (but *do not* delete any related...</span>
<span class="ansi33">  users export                        Export users (and roles) to given TOML file.</span>
<span class="ansi33">  users import                        Import users (and roles) from given TOML...</span>
<span class="ansi33">  users list                          List out information about users.</span>

<span class="ansi34">=== Print out help on help ===</span>
&gt;encapsia help help
<span class="ansi33">Usage: encapsia help [OPTIONS] [COMMAND]

  Print longer help information about the CLI.

Options:
  --help  Show this message and exit.</span>

<span class="ansi34">=== Print out help on users ===</span>
&gt;encapsia help users
<span class="ansi33">Usage: encapsia help [OPTIONS] COMMAND [ARGS]...

  Manage users, including superuser and system users.

Options:
  --help  Show this message and exit.

Commands:
  add-superuser   Create superuser with suitable user and role.
  add-systemuser  Create system user with suitable user and role.
  delete          Delete user (but *do not* delete any related role).
  export          Export users (and roles) to given TOML file.
  import          Import users (and roles) from given TOML file.
  list            List out information about users.</span>

<span class="ansi34">=== Print out the version ===</span>
&gt;encapsia version
<span class="ansi33">Encapsia CLI version: 0.5.9</span>
<span class="ansi33">Encapsia API version: 0.4.6</span>

<span class="ansi34">=== Get whoami info about current token ===</span>
&gt;encapsia token whoami
<span class="ansi32">id = 20834
name = "Root Superuser"
email = "system@root.encapsia.com"
capabilities = [ "superuser",]
expires_at = "2025-04-01T09:45:37.300171+00:00"
issued_at = "2024-04-01T09:45:37.300171+00:00"
site_id = ""
token = "925f2dfd77d04cf89293fcca5f3230d6"
</span>

<span class="ansi34">=== Display shell commands to set ENCAPSIA_URL and ENCAPSIA_TOKEN environment variables for host ===</span>
&gt;encapsia token env
<span class="ansi33">export ENCAPSIA_URL='https://localhost.icethree.com'</span>
<span class="ansi33">export ENCAPSIA_TOKEN='925f2dfd77d04cf89293fcca5f3230d6'</span>

<span class="ansi34">=== Extend lifespan of token (changes the encapsia credentials) ===</span>
&gt;encapsia token extend
<span class="ansi33">Encapsia credentials file updated.</span>
&gt;encapsia token whoami
<span class="ansi32">id = 20906
name = "Root Superuser"
email = "system@root.encapsia.com"
capabilities = [ "superuser",]
expires_at = "2025-04-01T09:53:00.437283+00:00"
issued_at = "2024-04-01T09:53:00.437283+00:00"
site_id = ""
token = "ea3fcb1e96134a9eb2f3e0679e493dad"
</span>

<span class="ansi34">=== Transfer (get new token) to specified user. Stored token *should not* change! ===</span>
&gt;encapsia users add-superuser user1@cmedtechnology.com User One
<span class="ansi32">Superuser user1@cmedtechnology.com successfully created</span>
&gt;encapsia token transfer user1@cmedtechnology.com
<span class="ansi33">2c934b712a6d4d8fae224dde1cb60ed0</span>
&gt;encapsia token whoami
<span class="ansi32">id = 20906
name = "Root Superuser"
email = "system@root.encapsia.com"
capabilities = [ "superuser",]
expires_at = "2025-04-01T09:53:00.437283+00:00"
issued_at = "2024-04-01T09:53:00.437283+00:00"
site_id = ""
token = "ea3fcb1e96134a9eb2f3e0679e493dad"
</span>

<span class="ansi34">=== Set a config value to a string ===</span>
&gt;encapsia config set test_string \"a_string\"
<span class="ansi32">Configuration entry test_string has been set to a_string</span>
&gt;encapsia config get test_string
<span class="ansi32">"a_string"</span>

<span class="ansi34">=== Set a config value to a number ===</span>
&gt;encapsia config set test_number 123
<span class="ansi32">Configuration entry test_number has been set to 123</span>
&gt;encapsia config get test_number
<span class="ansi32">123</span>

<span class="ansi34">=== Set a config value to a list ===</span>
&gt;encapsia config set test_list '["a", 1]'
<span class="ansi32">Configuration entry test_list has been set to ['a', 1]</span>
&gt;encapsia config get test_list
<span class="ansi32">[
    "a",
    1
]</span>

<span class="ansi34">=== Delete config values ===</span>
&gt;encapsia config delete test_string
<span class="ansi32">Configuration entry test_string deleted</span>
&gt;encapsia config delete test_number
<span class="ansi32">Configuration entry test_number deleted</span>
&gt;encapsia config delete test_list
<span class="ansi32">Configuration entry test_list deleted</span>

<span class="ansi34">=== Save config to a file and load it again ===</span>
&gt;encapsia config save /tmp/test_encapsia_config.json
<span class="ansi32">Configuration saved to /tmp/test_encapsia_config.json</span>
&gt;tail /tmp/test_encapsia_config.json
        "scope": "openid email",
        "token_uri": "http://encapsia-trio:5055/oauth2/token"
    },
    "root_token": "&lt;hidden&gt;",
    "session_lifespan": 604800,
    "task_timeout": 600,
    "trial": "localhost",
    "url": "https://localhost.icethree.com",
    "view_lifespan": 600
}&gt;cat /tmp/test_encapsia_config.json
&gt;python -c "import json, sys; c=json.load(sys.stdin); del c['root_token']; print(json.dumps(c))" &gt; /tmp/test_encapsia_config2.json
&gt;encapsia config load /tmp/test_encapsia_config2.json
<span class="ansi32">Configuration loaded from /tmp/test_encapsia_config2.json</span>
&gt;rm /tmp/test_encapsia_config*.json

<span class="ansi34">=== Show the entire config ===</span>
&gt;encapsia config show
&gt;tail
        "scope": "openid email",
        "token_uri": "http://encapsia-trio:5055/oauth2/token"
    },
    "root_token": "&lt;hidden&gt;",
    "session_lifespan": 604800,
    "task_timeout": 600,
    "trial": "localhost",
    "url": "https://localhost.icethree.com",
    "view_lifespan": 600
}

<span class="ansi34">=== Build the walkthrough_test plugin from src ===</span>
&gt;encapsia plugins dev-build --overwrite test_plugin
<span class="ansi33">Added to local store: /home/pmierlutiu/.encapsia/plugins/plugin-walkthrough_test-0.0.1.tar.gz</span>

<span class="ansi34">=== Request a build again, but this time it should be skipped over because it already exists in the local store ===</span>
&gt;encapsia plugins dev-build test_plugin
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-walkthrough_test-0.0.1.tar.gz (Skipping)</span>

<span class="ansi34">=== Move the walkthrough_test plugin out of the local store and then add it back in directly ===</span>
&gt;mv ~/.encapsia/plugins/plugin-walkthrough_test-0.0.1.tar.gz /tmp/
&gt;encapsia plugins add file:///tmp/plugin-walkthrough_test-0.0.1.tar.gz
<span class="ansi33">Added to local store: /home/pmierlutiu/.encapsia/plugins/plugin-walkthrough_test-0.0.1.tar.gz</span>

<span class="ansi34">=== Install Manager (ensure we have a clean way to call the refresh-roles task) ===</span>
&gt;encapsia plugins install --yes manager
<span class="ansi33">name*    existing version**    new version**    action
-------  --------------------  ---------------  --------
manager  1.2.13                1.2.13           skip</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Nothing to do!</span>

<span class="ansi34">=== Install the walkthrough_test plugin from the local store, then uninstall it ===</span>
&gt;encapsia plugins install --yes --versions=example.toml --show-logs
<span class="ansi33">name*             existing version**    new version**    action
----------------  --------------------  ---------------  --------
walkthrough_test  0.0.1                 0.0.1            skip</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Nothing to do!</span>
&gt;encapsia plugins uninstall --yes walkthrough_test --show-logs
<span class="ansi33">Uninstalling walkthrough_test</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Removing all/any schedules from plugin namespace: walkthrough_test
Calling pre_uninstall_task: test_module.test_function
Task walkthrough_test.test_module.test_function finished with result:
hello None
Destroying plugin namespace: walkthrough_test
Stopped all task workers for namespace: walkthrough_test
Destroyed virtualenv: walkthrough_test
Removed tasks directory: /home/ice/walkthrough_test
Removed webfiles directory: /var/share/nginx/iceplugins/walkthrough_test
Destroying views namespace walkthrough_test
Deleted PostgreSQL schema: walkthrough_test
Remove published permissions, if any
Remove published manifest, if any</span>

<span class="ansi34">=== Dev update the walkthrough_test plugin from scratch ===</span>
&gt;encapsia plugins dev-update --all test_plugin
<span class="ansi33">Including: tasks</span>
<span class="ansi33">Including: views</span>
<span class="ansi33">Including: wheels</span>
<span class="ansi33">Including: schedules</span>
<span class="ansi33">Uploading to server</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Extracted /tmp/ice/tmp8_do4wpc into /tmp/tmpf9zd5t3f
Removing all/any schedules from plugin namespace: walkthrough_test
Installing plugin walkthrough_test (0.0.1)
Made webfiles directory: /var/share/nginx/iceplugins/walkthrough_test
Installing web files in to namespace walkthrough_test
Installed manifest /var/share/nginx/iceplugins/walkthrough_test/plugin.toml
python -m venv /home/ice/.local/share/virtualenvs/walkthrough_test

/home/ice/.local/share/virtualenvs/walkthrough_test/bin/python -m pip install -c /home/ice/inf-ice-pluginsmanager/requirements.txt redis rq wheel
Collecting redis
  Using cached redis-5.0.1-py3-none-any.whl.metadata (8.9 kB)
Collecting rq
  Using cached rq-1.15.1-py2.py3-none-any.whl.metadata (1.6 kB)
Collecting wheel
  Using cached wheel-0.43.0-py3-none-any.whl.metadata (2.2 kB)
Collecting click&gt;=5.0.0 (from rq)
  Using cached click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Using cached redis-5.0.1-py3-none-any.whl (250 kB)
Using cached rq-1.15.1-py2.py3-none-any.whl (95 kB)
Using cached wheel-0.43.0-py3-none-any.whl (65 kB)
Using cached click-8.1.7-py3-none-any.whl (97 kB)
Installing collected packages: wheel, redis, click, rq
Successfully installed click-8.1.7 redis-5.0.1 rq-1.15.1 wheel-0.43.0
Made virtualenv: walkthrough_test
Installing wheels in to namespace walkthrough_test
Modified requirements.txt:
--- snip ---
encapsia-api--- snip end ---
/home/ice/.local/share/virtualenvs/walkthrough_test/bin/python -m pip install --find-links /tmp/tmpf9zd5t3f/tmpgg2ciu0j/wheels --requirement /tmp/tmpgcht0cw2 --constraint /home/ice/inf-ice-pluginsmanager/icepluginsmanager/constraints.txt
Looking in links: /tmp/tmpf9zd5t3f/tmpgg2ciu0j/wheels
Collecting encapsia-api (from -r /tmp/tmpgcht0cw2 (line 1))
  Using cached encapsia_api-0.4.6-py3-none-any.whl.metadata (3.8 kB)
Collecting arrow&gt;=1.2.0 (from encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached arrow-1.3.0-py3-none-any.whl.metadata (7.5 kB)
Collecting requests&gt;=2.24 (from requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached requests-2.31.0-py3-none-any.whl.metadata (4.6 kB)
Collecting toml&gt;=0.10 (from encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached toml-0.10.2-py2.py3-none-any.whl.metadata (7.1 kB)
Collecting python-dateutil&gt;=2.7.0 (from arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting types-python-dateutil&gt;=2.8.10 (from arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached types_python_dateutil-2.9.0.20240316-py3-none-any.whl.metadata (1.8 kB)
Collecting charset-normalizer&lt;4,&gt;=2 (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)
Collecting idna&lt;4,&gt;=2.5 (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached idna-3.6-py3-none-any.whl.metadata (9.9 kB)
Collecting urllib3&lt;3,&gt;=1.21.1 (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached urllib3-2.2.1-py3-none-any.whl.metadata (6.4 kB)
Collecting certifi&gt;=2017.4.17 (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached certifi-2024.2.2-py3-none-any.whl.metadata (2.2 kB)
Collecting six&gt;=1.5 (from python-dateutil&gt;=2.7.0-&gt;arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpgcht0cw2 (line 1))
  Using cached six-1.16.0-py2.py3-none-any.whl.metadata (1.8 kB)
Using cached encapsia_api-0.4.6-py3-none-any.whl (26 kB)
Using cached arrow-1.3.0-py3-none-any.whl (66 kB)
Using cached requests-2.31.0-py3-none-any.whl (62 kB)
Using cached toml-0.10.2-py2.py3-none-any.whl (16 kB)
Using cached certifi-2024.2.2-py3-none-any.whl (163 kB)
Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (140 kB)
Using cached idna-3.6-py3-none-any.whl (61 kB)
Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Using cached types_python_dateutil-2.9.0.20240316-py3-none-any.whl (9.7 kB)
Using cached urllib3-2.2.1-py3-none-any.whl (121 kB)
Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: urllib3, types-python-dateutil, toml, six, idna, charset-normalizer, certifi, requests, python-dateutil, arrow, encapsia-api
Successfully installed arrow-1.3.0 certifi-2024.2.2 charset-normalizer-3.3.2 encapsia-api-0.4.6 idna-3.6 python-dateutil-2.9.0.post0 requests-2.31.0 six-1.16.0 toml-0.10.2 types-python-dateutil-2.9.0.20240316 urllib3-2.2.1
Creating views namespace walkthrough_test
Created PostgreSQL schema: walkthrough_test
Installing views in to namespace walkthrough_test
Installing view permissions.sql
Installing view test_views.sql
Created/updated system user walkthrough_test with capabilities: ['login.transfer.from', 'login.again', 'values.read', 'values.write', 'task.run.walkthrough_test']
Publishing permissions in to pluginsmanager
Permission: walkthrough_test-admin
Permission: walkthrough_test-minimal
Publishing plugin manifest in to pluginsmanager
Installing tasks in to namespace walkthrough_test
Installed task file /home/ice/walkthrough_test/__pycache__/test_module.cpython-38-pytest-6.2.5.pyc
Installed task file /home/ice/walkthrough_test/test_module.py
Configuring 1 task workers for namespace walkthrough_test
Installing schedules in to namespace walkthrough_test
Created schedule: Test scheduled task
Created schedule: Test scheduled task to be run with a system user
Calling post_install_task: test_module.test_function_with_meta_as_fixed_arg
Timeout calling hook walkthrough_test.test_module.test_function_with_meta_as_fixed_arg</span>

<span class="ansi34">=== Second time round there is nothing to do because nothing has changed ===</span>
&gt;encapsia plugins dev-update test_plugin
<span class="ansi33">Nothing to do.</span>

<span class="ansi34">=== Modify the walkthrough_test plugin and update again. This time only the tasks should be updated ===</span>
&gt;touch test_plugin/tasks/test_new_module.py
&gt;encapsia plugins dev-update test_plugin
<span class="ansi33">Including: tasks</span>
<span class="ansi33">Uploading to server</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Extracted /tmp/ice/tmpuamhf58j into /tmp/tmpi4vo6l6d
Removing all/any schedules from plugin namespace: walkthrough_test
Installing plugin walkthrough_test (0.0.1)
Webfiles directory already exists: /var/share/nginx/iceplugins/walkthrough_test
Installing web files in to namespace walkthrough_test
Installed manifest /var/share/nginx/iceplugins/walkthrough_test/plugin.toml
Virtualenv already exists: walkthrough_test
Created/updated system user walkthrough_test with capabilities: ['login.transfer.from', 'login.again', 'values.read', 'values.write', 'task.run.walkthrough_test']
Publishing permissions in to pluginsmanager
Permission: walkthrough_test-admin
Permission: walkthrough_test-minimal
Publishing plugin manifest in to pluginsmanager
Installing tasks in to namespace walkthrough_test
Installed task file /home/ice/walkthrough_test/__pycache__/test_module.cpython-38-pytest-6.2.5.pyc
Installed task file /home/ice/walkthrough_test/test_module.py
Installed task file /home/ice/walkthrough_test/test_new_module.py
Configuring 1 task workers for namespace walkthrough_test
Calling post_install_task: test_module.test_function_with_meta_as_fixed_arg
Timeout calling hook walkthrough_test.test_module.test_function_with_meta_as_fixed_arg</span>
&gt;rm test_plugin/tasks/test_new_module.py

<span class="ansi34">=== Install the non-dev version of the walkthrough_test plugin so we can uninstall it (to be tidy). ===</span>
&gt;encapsia plugins install --yes --versions=example.toml
<span class="ansi33">name*             existing version**    new version**    action
----------------  --------------------  ---------------  --------
walkthrough_test                        0.0.1            install</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Uploaded /home/pmierlutiu/.encapsia/plugins/plugin-walkthrough_test-0.0.1.tar.gz to blob: a41605289e71498ebb80b5f14a57a7fa</span>
<span class="ansi33">Installing</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
&gt;encapsia plugins uninstall --yes walkthrough_test
<span class="ansi33">Uninstalling walkthrough_test</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>

<span class="ansi34">=== Create and destroy new namespace ===</span>
&gt;encapsia plugins dev-create testing123
<span class="ansi33">Creating namespace</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Made webfiles directory: /var/share/nginx/iceplugins/testing123
Made tasks directory: /home/ice/testing123
python -m venv /home/ice/.local/share/virtualenvs/testing123

/home/ice/.local/share/virtualenvs/testing123/bin/python -m pip install -c /home/ice/inf-ice-pluginsmanager/requirements.txt redis rq wheel
Collecting redis
  Using cached redis-5.0.1-py3-none-any.whl.metadata (8.9 kB)
Collecting rq
  Using cached rq-1.15.1-py2.py3-none-any.whl.metadata (1.6 kB)
Collecting wheel
  Using cached wheel-0.43.0-py3-none-any.whl.metadata (2.2 kB)
Collecting click&gt;=5.0.0 (from rq)
  Using cached click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Using cached redis-5.0.1-py3-none-any.whl (250 kB)
Using cached rq-1.15.1-py2.py3-none-any.whl (95 kB)
Using cached wheel-0.43.0-py3-none-any.whl (65 kB)
Using cached click-8.1.7-py3-none-any.whl (97 kB)
Installing collected packages: wheel, redis, click, rq
Successfully installed click-8.1.7 redis-5.0.1 rq-1.15.1 wheel-0.43.0
Made virtualenv: testing123
Configuring 1 task workers for namespace testing123
Creating views namespace testing123
Created PostgreSQL schema: testing123</span>
&gt;encapsia plugins dev-destroy testing123
<span class="ansi33">Destroying namespace: testing123</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">supervisorctl -c /home/ice/inf-ice-pluginsmanager/icepluginsmanager/supervisor.conf stop schedule
schedule: stopped
Removed 0 scheduled tasks in namespace testing123
supervisorctl -c /home/ice/inf-ice-pluginsmanager/icepluginsmanager/supervisor.conf start schedule
schedule: started
Stopped all task workers for namespace: testing123
Destroyed virtualenv: testing123
Removed tasks directory: /home/ice/testing123
Removed webfiles directory: /var/share/nginx/iceplugins/testing123
Destroying views namespace testing123
Deleted PostgreSQL schema: testing123</span>

<span class="ansi34">=== Fetch a few specific plugins from S3, install launch, and show the logs ===</span>
&gt;encapsia plugins add --versions example_plugins.toml
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-launch-1.2.3.tar.gz (Skipping)</span>
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-manager-1.2.7.tar.gz (Skipping)</span>
&gt;encapsia plugins install --yes launch
<span class="ansi33">name*    existing version**    new version**    action
-------  --------------------  ---------------  --------
launch                         2.1.0            install</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Uploaded /home/pmierlutiu/.encapsia/plugins/plugin-launch-2.1.0.tar.gz to blob: 0cbed5866cf542acbda4c88358d55f82</span>
<span class="ansi33">Installing</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
&gt;encapsia plugins logs launch
<span class="ansi33">Name: launch</span>
<span class="ansi33">Version: 2.1.0</span>
<span class="ansi33">Description: Launch app</span>
<span class="ansi33">Action: install</span>
<span class="ansi33">Server: localhost</span>
<span class="ansi33">Success: True</span>
<span class="ansi33">When: 2024-04-01T09:55:31.632048+00:00</span>
<span class="ansi33">Logs:</span>
<span class="ansi32">Downloaded blob 0cbed5866cf542acbda4c88358d55f82 to /tmp/tmp_v7nd8n_
Extracted /tmp/tmp_v7nd8n_ into /tmp/tmpr5mgtafm
Registered plugin launch (2.1.0) from blob 0cbed5866cf542acbda4c88358d55f82 with id 8923dac139b04c05930eeacc5eae3e9e
Removing all/any schedules from plugin namespace: launch
Manifest file for launch not found.
Destroying plugin namespace: launch
No task workers configured for namespace: launch
Virtualenv does not exist: launch
Tasks directory does not exist: /home/ice/launch
Webfiles directory does not exist: /var/share/nginx/iceplugins/launch
Views namespace does not exist: launch
Remove published permissions, if any
Remove published manifest, if any
Installing plugin launch (2.1.0)
Made webfiles directory: /var/share/nginx/iceplugins/launch
Installing web files in to namespace launch
Installed web file /var/share/nginx/iceplugins/launch/fonts/insight_spinner.svg
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia.css
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia-icon.svg
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia-identify-theme.css
Installed web file /var/share/nginx/iceplugins/launch/asset-manifest.json
Installed web file /var/share/nginx/iceplugins/launch/robots.txt
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js.LICENSE.txt
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js.map
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia-icon.2be86397387259675898ad5b8f281366.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.2e416dfb83b610f7b128.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.447f07f0e17bbf8b8ebb.ttf
Installed web file /var/share/nginx/iceplugins/launch/static/media/insight_spinner.a513325f88abdb55011ae691d81336ed.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia-icon.2be86397387259675898.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.905640281ee27e0c2f9b.woff
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.bd9b02bf1131d90bfe22.woff
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia_login_dolphin.3338cafeb31b0c9ba867.jpg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.5a588d6a8bfc41d69f88.ttf
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.86c03c03a6e4002e883a.eot
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia_logo-dark.5b7ed4c9a8c41fb5d9e8.png
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.6ee80f4bf5d3f92f3bf7.woff2
Installed web file /var/share/nginx/iceplugins/launch/static/css/main.2cf65d9a.css.map
Installed web file /var/share/nginx/iceplugins/launch/static/css/main.2cf65d9a.css
Installed web file /var/share/nginx/iceplugins/launch/icetoolbelt.js.LICENSE.txt
Installed web file /var/share/nginx/iceplugins/launch/version.txt
Installed web file /var/share/nginx/iceplugins/launch/icetoolbelt.js
Installed web file /var/share/nginx/iceplugins/launch/index.html
Installed web file /var/share/nginx/iceplugins/launch/manifest.json
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia_login_dolphin.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/insight_spinner.svg
Installed web file /var/share/nginx/iceplugins/launch/img/icons.json
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia-background.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/icons/encapsia-icon.svg
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia_login_dolphin_white.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia-background-with-pattern.jpg
Installed manifest /var/share/nginx/iceplugins/launch/plugin.toml
python -m venv /home/ice/.local/share/virtualenvs/launch

/home/ice/.local/share/virtualenvs/launch/bin/python -m pip install -c /home/ice/inf-ice-pluginsmanager/requirements.txt redis rq wheel
Collecting redis
  Using cached redis-5.0.1-py3-none-any.whl.metadata (8.9 kB)
Collecting rq
  Using cached rq-1.15.1-py2.py3-none-any.whl.metadata (1.6 kB)
Collecting wheel
  Using cached wheel-0.43.0-py3-none-any.whl.metadata (2.2 kB)
Collecting click&gt;=5.0.0 (from rq)
  Using cached click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Using cached redis-5.0.1-py3-none-any.whl (250 kB)
Using cached rq-1.15.1-py2.py3-none-any.whl (95 kB)
Using cached wheel-0.43.0-py3-none-any.whl (65 kB)
Using cached click-8.1.7-py3-none-any.whl (97 kB)
Installing collected packages: wheel, redis, click, rq
Successfully installed click-8.1.7 redis-5.0.1 rq-1.15.1 wheel-0.43.0
Made virtualenv: launch
Installing wheels in to namespace launch
Modified requirements.txt:
--- snip ---
arrow==1.3.0
certifi==2023.7.22
charset-normalizer==3.3.2
encapsia-api==0.4.4
idna==3.4
python-dateutil==2.8.2
requests
six==1.16.0
toml==0.10.2
types-python-dateutil==2.8.19.14
urllib3==2.0.7
--- snip end ---
/home/ice/.local/share/virtualenvs/launch/bin/python -m pip install --find-links /tmp/tmpr5mgtafm/wheels --requirement /tmp/tmpfckvyrjt --constraint /home/ice/inf-ice-pluginsmanager/icepluginsmanager/constraints.txt
Looking in links: /tmp/tmpr5mgtafm/wheels
Collecting arrow==1.3.0 (from -r /tmp/tmpfckvyrjt (line 1))
  Using cached arrow-1.3.0-py3-none-any.whl.metadata (7.5 kB)
Collecting certifi==2023.7.22 (from -r /tmp/tmpfckvyrjt (line 2))
  Using cached certifi-2023.7.22-py3-none-any.whl.metadata (2.2 kB)
Collecting charset-normalizer==3.3.2 (from -r /tmp/tmpfckvyrjt (line 3))
  Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)
Collecting encapsia-api==0.4.4 (from -r /tmp/tmpfckvyrjt (line 4))
  Using cached encapsia_api-0.4.4-py3-none-any.whl.metadata (3.7 kB)
Collecting idna==3.4 (from -r /tmp/tmpfckvyrjt (line 5))
  Using cached idna-3.4-py3-none-any.whl.metadata (9.8 kB)
Collecting python-dateutil==2.8.2 (from -r /tmp/tmpfckvyrjt (line 6))
  Using cached python_dateutil-2.8.2-py2.py3-none-any.whl.metadata (8.2 kB)
Collecting requests (from -r /tmp/tmpfckvyrjt (line 7))
  Using cached requests-2.31.0-py3-none-any.whl.metadata (4.6 kB)
Collecting six==1.16.0 (from -r /tmp/tmpfckvyrjt (line 8))
  Using cached six-1.16.0-py2.py3-none-any.whl.metadata (1.8 kB)
Collecting toml==0.10.2 (from -r /tmp/tmpfckvyrjt (line 9))
  Using cached toml-0.10.2-py2.py3-none-any.whl.metadata (7.1 kB)
Collecting types-python-dateutil==2.8.19.14 (from -r /tmp/tmpfckvyrjt (line 10))
  Using cached types_python_dateutil-2.8.19.14-py3-none-any.whl.metadata (1.6 kB)
Collecting urllib3==2.0.7 (from -r /tmp/tmpfckvyrjt (line 11))
  Using cached urllib3-2.0.7-py3-none-any.whl.metadata (6.6 kB)
Using cached arrow-1.3.0-py3-none-any.whl (66 kB)
Using cached certifi-2023.7.22-py3-none-any.whl (158 kB)
Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (140 kB)
Using cached encapsia_api-0.4.4-py3-none-any.whl (26 kB)
Using cached idna-3.4-py3-none-any.whl (61 kB)
Using cached python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)
Using cached toml-0.10.2-py2.py3-none-any.whl (16 kB)
Using cached types_python_dateutil-2.8.19.14-py3-none-any.whl (9.4 kB)
Using cached urllib3-2.0.7-py3-none-any.whl (124 kB)
Using cached requests-2.31.0-py3-none-any.whl (62 kB)
Installing collected packages: types-python-dateutil, urllib3, toml, six, idna, charset-normalizer, certifi, requests, python-dateutil, arrow, encapsia-api
Successfully installed arrow-1.3.0 certifi-2023.7.22 charset-normalizer-3.3.2 encapsia-api-0.4.4 idna-3.4 python-dateutil-2.8.2 requests-2.31.0 six-1.16.0 toml-0.10.2 types-python-dateutil-2.8.19.14 urllib3-2.0.7
Creating views namespace launch
Created PostgreSQL schema: launch
Installing views in to namespace launch
Installing view permissions.sql
Installing view plugin_info.sql
Publishing permissions in to pluginsmanager
Permission: launch-admin
Publishing plugin manifest in to pluginsmanager
Installing tasks in to namespace launch
Installed task file /home/ice/launch/ice_refresh_roles_caller.py
Configuring 1 task workers for namespace launch
Calling post_install_task: ice_refresh_roles_caller.run
Task launch.ice_refresh_roles_caller.run finished with result:
Calling manager.ice_refresh_roles.refresh_roles from launch task ...
Received message: The ice refresh roles task has nothing to update.
Finished calling manager.ice_refresh_roles.refresh_roles from launch task.
Installed plugin with id 8923dac139b04c05930eeacc5eae3e9e</span>
<span class="ansi33"></span>

<span class="ansi34">=== Fetch latest plugins from S3, install launch, and show the logs ===</span>
&gt;encapsia plugins add --latest-existing
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-archiver-1.5.8.tar.gz (Skipping)</span>
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-launch-2.1.0.tar.gz (Skipping)</span>
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-manager-1.2.13.tar.gz (Skipping)</span>
<span class="ansi33">Found: /home/pmierlutiu/.encapsia/plugins/plugin-tutor-1.1.11.tar.gz (Skipping)</span>
&gt;encapsia plugins install --yes launch
<span class="ansi33">name*    existing version**    new version**    action
-------  --------------------  ---------------  --------
launch   2.1.0                 2.1.0            skip</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Nothing to do!</span>
&gt;encapsia plugins logs launch
<span class="ansi33">Name: launch</span>
<span class="ansi33">Version: 2.1.0</span>
<span class="ansi33">Description: Launch app</span>
<span class="ansi33">Action: install</span>
<span class="ansi33">Server: localhost</span>
<span class="ansi33">Success: True</span>
<span class="ansi33">When: 2024-04-01T09:55:31.632048+00:00</span>
<span class="ansi33">Logs:</span>
<span class="ansi32">Downloaded blob 0cbed5866cf542acbda4c88358d55f82 to /tmp/tmp_v7nd8n_
Extracted /tmp/tmp_v7nd8n_ into /tmp/tmpr5mgtafm
Registered plugin launch (2.1.0) from blob 0cbed5866cf542acbda4c88358d55f82 with id 8923dac139b04c05930eeacc5eae3e9e
Removing all/any schedules from plugin namespace: launch
Manifest file for launch not found.
Destroying plugin namespace: launch
No task workers configured for namespace: launch
Virtualenv does not exist: launch
Tasks directory does not exist: /home/ice/launch
Webfiles directory does not exist: /var/share/nginx/iceplugins/launch
Views namespace does not exist: launch
Remove published permissions, if any
Remove published manifest, if any
Installing plugin launch (2.1.0)
Made webfiles directory: /var/share/nginx/iceplugins/launch
Installing web files in to namespace launch
Installed web file /var/share/nginx/iceplugins/launch/fonts/insight_spinner.svg
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia.css
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia-icon.svg
Installed web file /var/share/nginx/iceplugins/launch/fonts/encapsia-identify-theme.css
Installed web file /var/share/nginx/iceplugins/launch/asset-manifest.json
Installed web file /var/share/nginx/iceplugins/launch/robots.txt
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js.LICENSE.txt
Installed web file /var/share/nginx/iceplugins/launch/static/js/main.3962ee00.js.map
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia-icon.2be86397387259675898ad5b8f281366.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.2e416dfb83b610f7b128.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.447f07f0e17bbf8b8ebb.ttf
Installed web file /var/share/nginx/iceplugins/launch/static/media/insight_spinner.a513325f88abdb55011ae691d81336ed.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia-icon.2be86397387259675898.svg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.905640281ee27e0c2f9b.woff
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.bd9b02bf1131d90bfe22.woff
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia_login_dolphin.3338cafeb31b0c9ba867.jpg
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.5a588d6a8bfc41d69f88.ttf
Installed web file /var/share/nginx/iceplugins/launch/static/media/Roboto-Regular-webfont.86c03c03a6e4002e883a.eot
Installed web file /var/share/nginx/iceplugins/launch/static/media/encapsia_logo-dark.5b7ed4c9a8c41fb5d9e8.png
Installed web file /var/share/nginx/iceplugins/launch/static/media/Material-Design-Iconic-Font.6ee80f4bf5d3f92f3bf7.woff2
Installed web file /var/share/nginx/iceplugins/launch/static/css/main.2cf65d9a.css.map
Installed web file /var/share/nginx/iceplugins/launch/static/css/main.2cf65d9a.css
Installed web file /var/share/nginx/iceplugins/launch/icetoolbelt.js.LICENSE.txt
Installed web file /var/share/nginx/iceplugins/launch/version.txt
Installed web file /var/share/nginx/iceplugins/launch/icetoolbelt.js
Installed web file /var/share/nginx/iceplugins/launch/index.html
Installed web file /var/share/nginx/iceplugins/launch/manifest.json
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia_login_dolphin.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/insight_spinner.svg
Installed web file /var/share/nginx/iceplugins/launch/img/icons.json
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia-background.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/icons/encapsia-icon.svg
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia_login_dolphin_white.jpg
Installed web file /var/share/nginx/iceplugins/launch/img/encapsia-background-with-pattern.jpg
Installed manifest /var/share/nginx/iceplugins/launch/plugin.toml
python -m venv /home/ice/.local/share/virtualenvs/launch

/home/ice/.local/share/virtualenvs/launch/bin/python -m pip install -c /home/ice/inf-ice-pluginsmanager/requirements.txt redis rq wheel
Collecting redis
  Using cached redis-5.0.1-py3-none-any.whl.metadata (8.9 kB)
Collecting rq
  Using cached rq-1.15.1-py2.py3-none-any.whl.metadata (1.6 kB)
Collecting wheel
  Using cached wheel-0.43.0-py3-none-any.whl.metadata (2.2 kB)
Collecting click&gt;=5.0.0 (from rq)
  Using cached click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Using cached redis-5.0.1-py3-none-any.whl (250 kB)
Using cached rq-1.15.1-py2.py3-none-any.whl (95 kB)
Using cached wheel-0.43.0-py3-none-any.whl (65 kB)
Using cached click-8.1.7-py3-none-any.whl (97 kB)
Installing collected packages: wheel, redis, click, rq
Successfully installed click-8.1.7 redis-5.0.1 rq-1.15.1 wheel-0.43.0
Made virtualenv: launch
Installing wheels in to namespace launch
Modified requirements.txt:
--- snip ---
arrow==1.3.0
certifi==2023.7.22
charset-normalizer==3.3.2
encapsia-api==0.4.4
idna==3.4
python-dateutil==2.8.2
requests
six==1.16.0
toml==0.10.2
types-python-dateutil==2.8.19.14
urllib3==2.0.7
--- snip end ---
/home/ice/.local/share/virtualenvs/launch/bin/python -m pip install --find-links /tmp/tmpr5mgtafm/wheels --requirement /tmp/tmpfckvyrjt --constraint /home/ice/inf-ice-pluginsmanager/icepluginsmanager/constraints.txt
Looking in links: /tmp/tmpr5mgtafm/wheels
Collecting arrow==1.3.0 (from -r /tmp/tmpfckvyrjt (line 1))
  Using cached arrow-1.3.0-py3-none-any.whl.metadata (7.5 kB)
Collecting certifi==2023.7.22 (from -r /tmp/tmpfckvyrjt (line 2))
  Using cached certifi-2023.7.22-py3-none-any.whl.metadata (2.2 kB)
Collecting charset-normalizer==3.3.2 (from -r /tmp/tmpfckvyrjt (line 3))
  Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)
Collecting encapsia-api==0.4.4 (from -r /tmp/tmpfckvyrjt (line 4))
  Using cached encapsia_api-0.4.4-py3-none-any.whl.metadata (3.7 kB)
Collecting idna==3.4 (from -r /tmp/tmpfckvyrjt (line 5))
  Using cached idna-3.4-py3-none-any.whl.metadata (9.8 kB)
Collecting python-dateutil==2.8.2 (from -r /tmp/tmpfckvyrjt (line 6))
  Using cached python_dateutil-2.8.2-py2.py3-none-any.whl.metadata (8.2 kB)
Collecting requests (from -r /tmp/tmpfckvyrjt (line 7))
  Using cached requests-2.31.0-py3-none-any.whl.metadata (4.6 kB)
Collecting six==1.16.0 (from -r /tmp/tmpfckvyrjt (line 8))
  Using cached six-1.16.0-py2.py3-none-any.whl.metadata (1.8 kB)
Collecting toml==0.10.2 (from -r /tmp/tmpfckvyrjt (line 9))
  Using cached toml-0.10.2-py2.py3-none-any.whl.metadata (7.1 kB)
Collecting types-python-dateutil==2.8.19.14 (from -r /tmp/tmpfckvyrjt (line 10))
  Using cached types_python_dateutil-2.8.19.14-py3-none-any.whl.metadata (1.6 kB)
Collecting urllib3==2.0.7 (from -r /tmp/tmpfckvyrjt (line 11))
  Using cached urllib3-2.0.7-py3-none-any.whl.metadata (6.6 kB)
Using cached arrow-1.3.0-py3-none-any.whl (66 kB)
Using cached certifi-2023.7.22-py3-none-any.whl (158 kB)
Using cached charset_normalizer-3.3.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (140 kB)
Using cached encapsia_api-0.4.4-py3-none-any.whl (26 kB)
Using cached idna-3.4-py3-none-any.whl (61 kB)
Using cached python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)
Using cached toml-0.10.2-py2.py3-none-any.whl (16 kB)
Using cached types_python_dateutil-2.8.19.14-py3-none-any.whl (9.4 kB)
Using cached urllib3-2.0.7-py3-none-any.whl (124 kB)
Using cached requests-2.31.0-py3-none-any.whl (62 kB)
Installing collected packages: types-python-dateutil, urllib3, toml, six, idna, charset-normalizer, certifi, requests, python-dateutil, arrow, encapsia-api
Successfully installed arrow-1.3.0 certifi-2023.7.22 charset-normalizer-3.3.2 encapsia-api-0.4.4 idna-3.4 python-dateutil-2.8.2 requests-2.31.0 six-1.16.0 toml-0.10.2 types-python-dateutil-2.8.19.14 urllib3-2.0.7
Creating views namespace launch
Created PostgreSQL schema: launch
Installing views in to namespace launch
Installing view permissions.sql
Installing view plugin_info.sql
Publishing permissions in to pluginsmanager
Permission: launch-admin
Publishing plugin manifest in to pluginsmanager
Installing tasks in to namespace launch
Installed task file /home/ice/launch/ice_refresh_roles_caller.py
Configuring 1 task workers for namespace launch
Calling post_install_task: ice_refresh_roles_caller.run
Task launch.ice_refresh_roles_caller.run finished with result:
Calling manager.ice_refresh_roles.refresh_roles from launch task ...
Received message: The ice refresh roles task has nothing to update.
Finished calling manager.ice_refresh_roles.refresh_roles from launch task.
Installed plugin with id 8923dac139b04c05930eeacc5eae3e9e</span>
<span class="ansi33"></span>

<span class="ansi34">=== Uninstall launch and show the logs ===</span>
&gt;encapsia plugins uninstall --yes launch
<span class="ansi33">Uninstalling launch</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
&gt;encapsia plugins logs launch
<span class="ansi33">Name: launch</span>
<span class="ansi33">Version: 2.1.0</span>
<span class="ansi33">Description: Launch app</span>
<span class="ansi33">Action: uninstall</span>
<span class="ansi33">Server: localhost</span>
<span class="ansi33">Success: True</span>
<span class="ansi33">When: 2024-04-01T09:55:46.916089+00:00</span>
<span class="ansi33">Logs:</span>
<span class="ansi32">Removing all/any schedules from plugin namespace: launch
Destroying plugin namespace: launch
Stopped all task workers for namespace: launch
Destroyed virtualenv: launch
Removed tasks directory: /home/ice/launch
Removed webfiles directory: /var/share/nginx/iceplugins/launch
Destroying views namespace launch
Deleted PostgreSQL schema: launch
Remove published permissions, if any
Remove published manifest, if any</span>
<span class="ansi33"></span>

<span class="ansi34">=== Get status on all installed plugins ===</span>
&gt;encapsia plugins status
<span class="ansi33">name*     version**    available**    installed
--------  -----------  -------------  ------------------------
</span><span class="ansi33">archiver  1.5.8        &lt;same&gt;         Wed 06 Mar 2024 14:25:29
</span><span class="ansi33">manager   1.2.13       2.0.0-73       Wed 06 Mar 2024 14:26:11
</span><span class="ansi33">tutor     1.1.11       &lt;same&gt;         Wed 06 Mar 2024 14:26:27</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>

<span class="ansi34">=== Get info on latest plugins in the local store ===</span>
&gt;encapsia plugins ls
<span class="ansi33">name*                                   version**
--------------------------------------  -----------
analytics_addon                         2.1.0
analytics_dataviews [relliott15]        1.0.0
analytics_permissions                   2.0.0
archiver                                1.5.8
boxplot_gallery                         1.0.7
coding                                  1.3.1-1
conduct                                 1.6.10
d001gallery                             2.0.0
datapoint_console_gallery               1.0.2
datapoint_scatterplot_gallery           1.0.1
datapointslib                           1.1.0
deploy                                  1.2.1
entry                                   2.1.0-23
esourcetraining                         1.1.11
example                                 0.0.3
foo                                     1.0.0
ins_bs01_transcribed_data [cerevel]     1.0.0
ins_d001_data_downloader                1.2.0
ins_d002_data_explorer                  1.2.0
ins_d003_data_value_issues              1.1.0
ins_e001_actual_enrollment_over_time    1.3.0
ins_local_labs                          2.0.0
ins_ls001_query_listing                 1.2.0
ins_ls002_missing_pages                 1.3.0-1
ins_me001_query_totals                  1.1.0
ins_me002_query_dashboard               1.1.0
ins_me003_site_metrics                  1.1.0
ins_me004_data_entry_dashboard          1.1.0
ins_me005_significant_events_dashboard  1.2.0
ins_me006_patient_profiles              1.0.0
ins_oth01_sharedfunctions               1.3.2
ins_oth01_sharedfunctions_test          1.3.2
ins_oth02_bespokereportsframework       1.3.5
ins_p001_trial_totals                   1.2.0
ins_p002_trial_query_progress           1.3.0
ins_p003_trial_track_progress           1.3.0
ins_p004_site_query_progress            1.3.0
ins_p005_site_track_progress            1.3.0
ins_p006_subject_track_progress         1.3.0
ins_p007_subject_query_progress         1.3.0
ins_p008_subject_status                 1.2.0
ins_p009_visit_track_listing            1.2.0
ins_p011_tag_listing                    1.3.0
ins_p012_audit_trail                    1.3.0
ins_sk001_hello_world_gallery_test      0.0.2-4
ins_ss01_dmmetricsreport                1.0.2
ins_ss02_screenfaildisab                1.0.5
ins_ss03_transcribed_data               1.2.1
ins_ss04_subjectprogressstatus          1.1.0
ins_ss05_positive_urine_drug            1.1.0
ins_st01_bi_report                      1.0.1
ins_st03_ae_dashboard                   1.0.4
ins_st04_attachments_workflow           1.0.1
ins_st13_study_restrictions             1.0.2
ins_st15_tokengenerator                 1.0.4
ins_st17_assessments_over_time          1.0.3
ins_st18_visit_windows                  1.0.5
ins_st19_aetimeline                     1.0.3
ins_st21_assessments_performed          1.2.0
ins_st23_ae_coding_summary              1.0.1
ins_st27_pi_signature_count             1.0.2
ins_st29_duplicate_records              1.1.0
ins_st34_track_listing                  1.2.0
ins_st35_tpdrecon                       1.0.0
ins_st43_lock_listing                   1.0.1
insights                                2.1.2
inventory                               1.0.3
launch                                  2.1.0
loader                                  1.4.1
loaderreview                            1.1.10-3
manager                                 2.0.0-73
metricslib                              1.0.1
missingdatalib                          1.0.2
postgresql_maintenance                  1.0.0
serverlib                               1.1.3
shared_trial_settings                   1.0.0
shared_trial_settings [vax24101]        1.0.0
sync                                    1.1.2
tags                                    1.1.4-7
tcp                                     1.1.1
test                                    0.0.1
tmp_maintenance                         1.0.1
tutor                                   1.1.11
tutor_test                              1.1.11-2
walkthrough_test                        0.0.1</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
&gt;encapsia plugins ls -l
<span class="ansi33">name*                                   version**    description
--------------------------------------  -----------  -------------------------------------------------------------------------------------------------------------------------------------
analytics_addon                         2.1.0        Interactive computing environment for analysing data and creating insights.
analytics_dataviews [relliott15]        1.0.0        analytics_dataviews.
analytics_permissions                   2.0.0        Adds the ability to use the Analytics application
archiver                                1.5.8        Web Archiver Plugin
boxplot_gallery                         1.0.7        Displays data as a boxplot.
coding                                  1.3.1-1      Assign universal codes to clinical trial data for easier analysis and submission to regulatory authorities.
conduct                                 1.6.10       Conduct app
d001gallery                             2.0.0        Identify outliers in the data with this boxplot Insight. Select from a range of variables and group by subject or site.
datapoint_console_gallery               1.0.2        Perform actions on datapoints.
datapoint_scatterplot_gallery           1.0.1        View all datapoints as a 3D scatterplot
datapointslib                           1.1.0        Library to obtain 'tall thin' table of datapoints.
deploy                                  1.2.1        Deploy and activate trial configuration versions across servers.
entry                                   2.1.0-23     Entry app
esourcetraining                         1.1.11       Training for eSource App.
example                                 0.0.3        Example plugin
foo                                     1.0.0        Test plugin for Encapsia CLI walkthrough tests
ins_bs01_transcribed_data [cerevel]     1.0.0        Transcribed Data Listing
ins_d001_data_downloader                1.2.0        Download datasets as csv from multiple dataview sets.
ins_d002_data_explorer                  1.2.0        Provides interactive view of the datasets.
ins_d003_data_value_issues              1.1.0        This insight is used to identify data value issues across all the entered data.
ins_e001_actual_enrollment_over_time    1.3.0        This insight provides trial level enrollment data.
ins_local_labs                          2.0.0        Loads the corresponding lower and upper range and units for local laboratory parameters into applicable forms.
ins_ls001_query_listing                 1.2.0        View, filter and download all study queries by type and status.
ins_ls002_missing_pages                 1.3.0-1      This insight is used to identify pages with no data.
ins_me001_query_totals                  1.1.0        Review query metrics and performance across the trial hierarchy.
ins_me002_query_dashboard               1.1.0        Provides site-level metrics related to currently open queries.
ins_me003_site_metrics                  1.1.0        Provides an overview of site performance across a variety of site level metrics.
ins_me004_data_entry_dashboard          1.1.0        Provides site-level metrics related to data entry
ins_me005_significant_events_dashboard  1.2.0        Provides site-level metrics related to significant events.
ins_me006_patient_profiles              1.0.0        Used to display and download a Patient Profile
ins_oth01_sharedfunctions               1.3.2        Insights: Shared Study Functions for shared Insight Functions
ins_oth01_sharedfunctions_test          1.3.2        Insights: Shared Study Functions for shared Insight Functions
ins_oth02_bespokereportsframework       1.3.5        Insight: Bespoke Reports Framework for producing listings
ins_p001_trial_totals                   1.2.0        High level counts of various types of metadata across the trial.
ins_p002_trial_query_progress           1.3.0        This insight provides trial level query progress.
ins_p003_trial_track_progress           1.3.0        Trial level track progress covering all the defined tracks.
ins_p004_site_query_progress            1.3.0        This insight provides site level query progress.
ins_p005_site_track_progress            1.3.0        Site level track progress covering all the defined tracks.
ins_p006_subject_track_progress         1.3.0        Subject level track progress covering all the defined tracks.
ins_p007_subject_query_progress         1.3.0        This insight provides subject level query progress.
ins_p008_subject_status                 1.2.0        This insight provides subject statuses across each of the sites.
ins_p009_visit_track_listing            1.2.0        Monitor track completion across all visits.
ins_p011_tag_listing                    1.3.0        This insight provides details for all the Tags that have been raised.
ins_p012_audit_trail                    1.3.0        Allows users to find all changes to datapoints that occur within two given timestamps.
ins_sk001_hello_world_gallery_test      0.0.2-4      Your first insight gallery, consists of 12 insights.
ins_ss01_dmmetricsreport                1.0.2        Insight plugin for report showing various DM metrics
ins_ss02_screenfaildisab                1.0.5        Insights plugin for the Screen Failures Track Disabler Insight
ins_ss03_transcribed_data               1.2.1        Insight plugin showing a Bespoke Report listing of eSource transcribed data.
ins_ss04_subjectprogressstatus          1.1.0        Displays all subject visit dates, including subject status on study and arm assignment
ins_ss05_positive_urine_drug            1.1.0        Insight plugin for the Urine drug screen Bespoke Report Insight.
ins_st01_bi_report                      1.0.1        Insight plugin for the Business Information Report Insight.
ins_st03_ae_dashboard                   1.0.4        Insight plugin for a dashboard to review the AE Information within the trial.
ins_st04_attachments_workflow           1.0.1        Insights plugin for the Attachments Manager Insight
ins_st13_study_restrictions             1.0.2        Insight Plugin listing study restrictions as a Bespoke Report
ins_st15_tokengenerator                 1.0.4        Insight plugin for creating tokens
ins_st17_assessments_over_time          1.0.3        Insight plugin for assessments over time
ins_st18_visit_windows                  1.0.5        Insight plugin for the Visit Windows Bespoke Report Insight
ins_st19_aetimeline                     1.0.3        Timeline of adverse events and concomitant medication administration
ins_st21_assessments_performed          1.2.0        Insight plugin for the Assessments Performed listing
ins_st23_ae_coding_summary              1.0.1        Adverse Events grouped by the medically coded Terms (SOC / PT)
ins_st27_pi_signature_count             1.0.2        Displays listing of CRF signature progress and percentage signed per site
ins_st29_duplicate_records              1.1.0        Insight plugin showing potential duplicate records as a Bespoke Report listing
ins_st34_track_listing                  1.2.0        Insight plugin for the Track Listing Bespoke Report Insight
ins_st35_tpdrecon                       1.0.0        Displays reconciliation report for third party data against CRF.
ins_st43_lock_listing                   1.0.1        Insight: Displays listing of Lock counts and percent per site
insights                                2.1.2        Customisable dashboard of visualisations allowing unique insight into your study data.
inventory                               1.0.3        Manage kits in shipments
launch                                  2.1.0        Launch app
loader                                  1.4.1        Set up data loaders and manually upload local lab data.
loaderreview                            1.1.10-3     Review, reconcile, and annotate loaded third party data.
manager                                 2.0.0-73     Manager app
metricslib                              1.0.1        Library to obtain metrics (counts) for each subject, e.g. number of entered pages.
missingdatalib                          1.0.2        Library to obtain metrics (counts) on data missing from forms.
postgresql_maintenance                  1.0.0        Maintainance tasks for PostgreSQL
serverlib                               1.1.3        Server lib is a plugin which consists of correct, clean and optimized common functionalities for re-use in other encapsia components.
shared_trial_settings                   1.0.0        Trial-specific extension settings.
shared_trial_settings [vax24101]        1.0.0        Shared Trial Settings as per the Trial Settings API
sync                                    1.1.2        Synchronise a pair of production servers
tags                                    1.1.4-7      Tags app
tcp                                     1.1.1        Plugin that creates and applies Trial Configuration Packages (TCP)
test                                    0.0.1        IOQ test plugin
tmp_maintenance                         1.0.1        Maintain the /tmp directory
tutor                                   1.1.11       Tutor app
tutor_test                              1.1.11-2     Tutor app
walkthrough_test                        0.0.1        Test plugin for Encapsia CLI walkthrough tests</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>

<span class="ansi34">=== Get info on upstream plugins ===</span>
&gt;encapsia plugins upstream
<span class="ansi33">Searching for plugins in S3 bucket(s): encapsia-plugins/cmedtech/pd/production/apps, encapsia-plugins/cmedtech/pd/production/insights, encapsia-plugins/cmedtech/pd/production/middleware, encapsia-plugins/cmedtech/pd/staging/apps, encapsia-plugins/cmedtech/pd/staging/insights, encapsia-plugins/cmedtech/pd/staging/middleware, encapsia-plugins/cmedtech/pd/sandbox/apps, encapsia-plugins/cmedtech/pd/sandbox/insights, encapsia-plugins/cmedtech/pd/sandbox/middleware, encapsia-plugins/cmedtech/sysops/production/sysadmin, encapsia-plugins/cmedcro/standards/production/insights, encapsia-plugins/cmedcro/standards/production/shared/</span>
<span class="ansi33">name*                                   version**    bucket            path
--------------------------------------  -----------  ----------------  ---------------------------------------------------------------
analytics_addon                         2.1.1-2      encapsia-plugins  cmedtech/pd/staging/apps/analytics_addon
analytics_permissions                   2.0.0        encapsia-plugins  cmedtech/pd/production/apps/analytics_permissions
archiver                                1.6.0-2      encapsia-plugins  cmedtech/pd/staging/apps/archiver
coding                                  1.3.1-1      encapsia-plugins  cmedtech/pd/staging/apps/coding
conduct                                 1.7.0-19     encapsia-plugins  cmedtech/pd/staging/apps/conduct
configtools                             0.0.2        encapsia-plugins  cmedtech/sysops/production/sysadmin/configtools
datapointslib                           1.1.0        encapsia-plugins  cmedtech/pd/production/middleware
deploy                                  1.2.2-1      encapsia-plugins  cmedtech/pd/staging/apps/deploy
entry                                   2.1.0-71     encapsia-plugins  cmedtech/pd/staging/apps/entry
esourcetraining                         1.1.11       encapsia-plugins  cmedtech/pd/production/apps/esourcetraining
ins_d001_data_downloader                1.2.0        encapsia-plugins  cmedtech/pd/production/insights/ins_d001_data_downloader
ins_d002_data_explorer                  1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_d003_data_value_issues              1.2.0        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_d003_data_value_issues
ins_e001_actual_enrollment_over_time    1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_local_labs                          2.0.0        encapsia-plugins  cmedtech/pd/staging/insights
ins_ls001_query_listing                 1.2.0        encapsia-plugins  cmedtech/pd/production/insights
ins_ls002_missing_pages                 1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_me001_query_totals                  1.2.0-7      encapsia-plugins  cmedtech/pd/sandbox/insights/ins_me001_query_totals
ins_me002_query_dashboard               1.2.0        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_me002_query_dashboard
ins_me003_site_metrics                  1.2.0        encapsia-plugins  cmedtech/pd/production/insights/ins_me003_site_metrics
ins_me004_data_entry_dashboard          1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_me005_significant_events_dashboard  1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_me006_patient_profiles              1.3.0        encapsia-plugins  cmedtech/pd/production/insights/ins_me006_patient_profiles
ins_oth01_sharedfunctions               2.3.1        encapsia-plugins  cmedcro/standards/production/shared
ins_oth02_bespokereportsframework       1.8.3        encapsia-plugins  cmedcro/standards/production/shared
ins_oth05_unit_conversions              1.0.9        encapsia-plugins  cmedcro/standards/production/shared
ins_oth06_standardmeasurements          3.0.0        encapsia-plugins  cmedcro/standards/production/shared
ins_oth08_caching                       1.1.0        encapsia-plugins  cmedcro/standards/production/shared
ins_oth10_tracks                        1.0.3        encapsia-plugins  cmedcro/standards/production/shared
ins_oth11_migration                     1.2.0        encapsia-plugins  cmedcro/standards/production/shared
ins_p001_trial_totals                   1.3.0-7      encapsia-plugins  cmedtech/pd/sandbox/insights/ins_p001_trial_totals
ins_p002_trial_query_progress           1.4.0        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_p002_trial_query_progress
ins_p003_trial_track_progress           1.4.0-8      encapsia-plugins  cmedtech/pd/staging/insights
ins_p004_site_query_progress            1.5.0-1      encapsia-plugins  cmedtech/pd/staging/insights/ins_p004_site_query_progress
ins_p005_site_track_progress            1.4.0-3      encapsia-plugins  cmedtech/pd/staging/insights
ins_p006_subject_track_progress         1.4.0        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_p006_subject_track_progress
ins_p007_subject_query_progress         1.4.0        encapsia-plugins  cmedtech/pd/production/insights/ins_p007_subject_query_progress
ins_p008_subject_status                 1.3.0        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_p008_subject_status
ins_p009_visit_track_listing            1.2.0        encapsia-plugins  cmedtech/pd/production/insights
ins_p011_tag_listing                    1.3.0        encapsia-plugins  cmedtech/pd/production/insights
ins_p012_audit_trail                    1.4.0        encapsia-plugins  cmedtech/pd/staging/insights/ins_p012_audit_trail
ins_sk001_hello_world_gallery           0.0.1        encapsia-plugins  cmedtech/pd/sandbox/insights/ins_sk001_hello_world_gallery
ins_ss01_dmmetricsreport                1.0.2        encapsia-plugins  cmedcro/standards/production/insights
ins_ss02_screenfaildisab                1.0.5        encapsia-plugins  cmedcro/standards/production/insights
ins_ss03_transcribed_data               1.2.2        encapsia-plugins  cmedcro/standards/production/insights
ins_ss04_subjectprogressstatus          1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_ss05_positive_urine_drug            1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st01_bi_report                      1.1.2        encapsia-plugins  cmedcro/standards/production/insights
ins_st02_coding_dict_history            1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st03_ae_dashboard                   1.0.7        encapsia-plugins  cmedcro/standards/production/insights
ins_st04_attachments_workflow           1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st05_data_entry_lag                 1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st06_user_activity                  1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st13_study_restrictions             1.0.2        encapsia-plugins  cmedcro/standards/production/insights
ins_st15_tokengenerator                 1.0.4        encapsia-plugins  cmedcro/standards/production/insights
ins_st17_assessments_over_time          2.1.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st18_visit_windows                  2.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st19_aetimeline                     2.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st20_db_config                      1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st21_assessments_performed          1.2.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st23_ae_coding_summary              2.1.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st24_sae_listings                   1.3.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st27_pi_signature_count             1.2.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st29_duplicate_records              1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st32_coding_report                  1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st33_coding_summary_report          1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st34_track_listing                  3.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st35_tpdrecon                       1.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st36_tracks_history                 1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st40_boxplots                       1.1.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st42_query_listing                  1.0.2        encapsia-plugins  cmedcro/standards/production/insights
ins_st43_lock_listing                   1.1.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st44_missing_pages                  2.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st46_dataviews_changes              1.1.0        encapsia-plugins  cmedcro/standards/production/insights
ins_st47_population_distribution        1.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st48_installed_insights             1.0.2        encapsia-plugins  cmedcro/standards/production/insights
ins_st50_insights_settings              1.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_st51_site_principal_investigator    1.0.1        encapsia-plugins  cmedcro/standards/production/insights
ins_wg03_ae_link                        1.0.0        encapsia-plugins  cmedcro/standards/production/insights
ins_wg04_mh_link                        1.0.0        encapsia-plugins  cmedcro/standards/production/insights
insights                                2.1.3        encapsia-plugins  cmedtech/pd/production/apps/insights
inventory                               1.0.4        encapsia-plugins  cmedtech/pd/production/apps/inventory
launch                                  2.1.0        encapsia-plugins  cmedtech/pd/production/apps/launch
loader                                  1.4.2        encapsia-plugins  cmedtech/pd/production/apps/loader
loaderreview                            1.1.10-10    encapsia-plugins  cmedtech/pd/staging/apps/loaderreview
manager                                 2.0.0-87     encapsia-plugins  cmedtech/pd/staging/apps/manager
metricslib                              1.0.2        encapsia-plugins  cmedtech/pd/production/middleware
missingdatalib                          1.0.2        encapsia-plugins  cmedtech/pd/production/middleware
serverlib                               1.1.3        encapsia-plugins  cmedtech/pd/production/middleware
store                                   1.0.0-47     encapsia-plugins  cmedtech/pd/sandbox/apps/store
sync                                    1.1.2        encapsia-plugins  cmedtech/sysops/production/sysadmin/sync
tags                                    1.1.4-12     encapsia-plugins  cmedtech/pd/staging/apps/tags
tcp                                     1.1.1        encapsia-plugins  cmedtech/pd/production/apps/tcp
test                                    0.0.1        encapsia-plugins  cmedtech/sysops/production/sysadmin/test
tmp_maintenance                         1.0.1        encapsia-plugins  cmedtech/sysops/production/sysadmin/tmp_maintenance
tutor                                   1.1.11       encapsia-plugins  cmedtech/pd/production/apps/tutor
webpsqlpermission                       0.0.1        encapsia-plugins  cmedtech/sysops/production/sysadmin/webpsqlpermission</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
&gt;encapsia plugins upstream conduct-1.6 --all-versions
<span class="ansi33">Searching for plugins in S3 bucket(s): encapsia-plugins/cmedtech/pd/production/apps, encapsia-plugins/cmedtech/pd/production/insights, encapsia-plugins/cmedtech/pd/production/middleware, encapsia-plugins/cmedtech/pd/staging/apps, encapsia-plugins/cmedtech/pd/staging/insights, encapsia-plugins/cmedtech/pd/staging/middleware, encapsia-plugins/cmedtech/pd/sandbox/apps, encapsia-plugins/cmedtech/pd/sandbox/insights, encapsia-plugins/cmedtech/pd/sandbox/middleware, encapsia-plugins/cmedtech/sysops/production/sysadmin, encapsia-plugins/cmedcro/standards/production/insights, encapsia-plugins/cmedcro/standards/production/shared/</span>
<span class="ansi33">name*    version**    bucket            path
-------  -----------  ----------------  -----------------------------------
conduct  1.6.0        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.1        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.2        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.3        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.4        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.4        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.5-1      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.5-2      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.5-2      encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.5-3      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.5        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.5        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.6-1      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.6-2      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.6-3      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.6-4      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.6        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.6        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.7-2      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.7-2      encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.7        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.7        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.7        encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.8-1      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-2      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-3      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-4      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-5      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-6      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-7      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8-8      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.8        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.8        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.9-1      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.9-2      encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.9        encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.9        encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-1     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-2     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-2     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.10-3     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-4     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-5     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10-6     encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.10       encapsia-plugins  cmedtech/pd/production/apps/conduct
conduct  1.6.10       encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-2     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-3     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-4     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-5     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-6     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-7     encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-10    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-11    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-11    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-12    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-12    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-15    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-16    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-19    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-19    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-20    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-21    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-22    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-23    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-23    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-24    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-25    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-26    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-27    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-28    encapsia-plugins  cmedtech/pd/sandbox/apps/conduct
conduct  1.6.11-29    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-30    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-31    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-32    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-33    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-34    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-35    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-36    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-37    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-38    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11-39    encapsia-plugins  cmedtech/pd/staging/apps/conduct
conduct  1.6.11       encapsia-plugins  cmedtech/pd/staging/apps/conduct</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>

<span class="ansi34">=== Install a plugin using a path ===</span>
&gt;encapsia plugins install --yes example_plugins/plugin-foo-1.0.0.tar.gz
<span class="ansi33">Added to local store: /home/pmierlutiu/.encapsia/plugins/plugin-foo-1.0.0.tar.gz</span>
<span class="ansi33">name*    existing version**    new version**    action
-------  --------------------  ---------------  --------
foo                            1.0.0            install</span>
<span class="ansi33">
(*) Plugin variant shown in square brackets when defined.
(**) Equivalent semver versions are shown in brackets when non-semver version is used.</span>
<span class="ansi33"></span>
<span class="ansi33">Uploaded /home/pmierlutiu/.encapsia/plugins/plugin-foo-1.0.0.tar.gz to blob: fba0fd9042f64554810e4887b1fc5181</span>
<span class="ansi33">Installing</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>

<span class="ansi34">=== Create a backup ===</span>
&gt;encapsia database backup /tmp/test_encapsia_backup
<span class="ansi33">Backing up database</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Downloaded 15278468 bytes to /tmp/test_encapsia_backup</span>
&gt;ls -l /tmp/test_encapsia_backup
-rw-rw-r-- 1 pmierlutiu pmierlutiu 15278468 Apr  1 12:56 /tmp/test_encapsia_backup

<span class="ansi34">=== Restore from the backup ===</span>
&gt;encapsia database restore --yes /tmp/test_encapsia_backup
<span class="ansi33">Database restore requested.</span>
<span class="ansi33">Please verify by other means (e.g. look at the logs).</span>
&gt;sleep 10
&gt;rm /tmp/test_encapsia_backup

<span class="ansi34">=== Create a fixture ===</span>
&gt;encapsia fixtures create test_fixture
<span class="ansi33">Creating fixture test_fixture</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Fixture "test_fixture" created on Mon Apr  1 09:56:57 2024</span>

<span class="ansi34">=== Use a fixture (DISABLED: to be less invasive on test server) ===</span>

<span class="ansi34">=== Delete a fixture ===</span>
&gt;encapsia fixtures delete --yes test_fixture
<span class="ansi33">Deleting fixture test_fixture</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Deleted fixture: test_fixture</span>

<span class="ansi34">=== List all fixtures ===</span>
&gt;encapsia fixtures list
<span class="ansi33">Fetching list of fixtures</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32"></span>

<span class="ansi34">=== (Setup for running views or tasks etc) Install the test plugin from src ===</span>
&gt;encapsia plugins dev-update --all test_plugin
<span class="ansi33">Including: tasks</span>
<span class="ansi33">Including: views</span>
<span class="ansi33">Including: wheels</span>
<span class="ansi33">Including: schedules</span>
<span class="ansi33">Uploading to server</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">Extracted /tmp/ice/tmpdza0a5ch into /tmp/tmprftltr7r
Removing all/any schedules from plugin namespace: walkthrough_test
Installing plugin walkthrough_test (0.0.1)
Webfiles directory already exists: /var/share/nginx/iceplugins/walkthrough_test
Installing web files in to namespace walkthrough_test
Installed manifest /var/share/nginx/iceplugins/walkthrough_test/plugin.toml
Virtualenv already exists: walkthrough_test
Installing wheels in to namespace walkthrough_test
Modified requirements.txt:
--- snip ---
encapsia-api--- snip end ---
/home/ice/.local/share/virtualenvs/walkthrough_test/bin/python -m pip install --find-links /tmp/tmprftltr7r/tmpswm28wnu/wheels --requirement /tmp/tmpywh9gpoi --constraint /home/ice/inf-ice-pluginsmanager/icepluginsmanager/constraints.txt
Looking in links: /tmp/tmprftltr7r/tmpswm28wnu/wheels
Requirement already satisfied: encapsia-api in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from -r /tmp/tmpywh9gpoi (line 1)) (0.4.6)
Requirement already satisfied: arrow&gt;=1.2.0 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (1.3.0)
Requirement already satisfied: requests&gt;=2.24 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (2.31.0)
Requirement already satisfied: toml&gt;=0.10 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (0.10.2)
Requirement already satisfied: python-dateutil&gt;=2.7.0 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (2.9.0.post0)
Requirement already satisfied: types-python-dateutil&gt;=2.8.10 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (2.9.0.20240316)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (3.6)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (2.2.1)
Requirement already satisfied: certifi&gt;=2017.4.17 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from requests&gt;=2.24-&gt;requests[security]&gt;=2.24-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (2024.2.2)
Requirement already satisfied: six&gt;=1.5 in ./.local/share/virtualenvs/walkthrough_test/lib/python3.11/site-packages (from python-dateutil&gt;=2.7.0-&gt;arrow&gt;=1.2.0-&gt;encapsia-api-&gt;-r /tmp/tmpywh9gpoi (line 1)) (1.16.0)
Creating views namespace walkthrough_test
Created PostgreSQL schema: walkthrough_test
Installing views in to namespace walkthrough_test
Installing view permissions.sql
Installing view test_views.sql
Created/updated system user walkthrough_test with capabilities: ['login.transfer.from', 'login.again', 'values.read', 'values.write', 'task.run.walkthrough_test']
Publishing permissions in to pluginsmanager
Permission: walkthrough_test-admin
Permission: walkthrough_test-minimal
Publishing plugin manifest in to pluginsmanager
Installing tasks in to namespace walkthrough_test
Installed task file /home/ice/walkthrough_test/__pycache__/test_module.cpython-38-pytest-6.2.5.pyc
Installed task file /home/ice/walkthrough_test/test_module.py
Configuring 1 task workers for namespace walkthrough_test
Installing schedules in to namespace walkthrough_test
Created schedule: Test scheduled task
Created schedule: Test scheduled task to be run with a system user
Calling post_install_task: test_module.test_function_with_meta_as_fixed_arg
Timeout calling hook walkthrough_test.test_module.test_function_with_meta_as_fixed_arg</span>

<span class="ansi34">=== Run view with no arguments ===</span>
&gt;encapsia run view walkthrough_test test_no_args
<span class="ansi32">[
    {
        "answer": "function with no arguments"
    }
]</span>

<span class="ansi34">=== Run view and save result to file ===</span>
&gt;encapsia run view walkthrough_test test_no_args --save-as /tmp/encapsia_test_save_from_view.txt
<span class="ansi33">Response saved to: /tmp/encapsia_test_save_from_view.txt (mime_type=application/json)</span>
&gt;echo $(cat /tmp/encapsia_test_save_from_view.txt)
[{"answer": "function with no arguments"}]
&gt;rm /tmp/encapsia_test_save_from_view.txt

<span class="ansi34">=== Run view with one argument ===</span>
&gt;encapsia run view walkthrough_test test_one_arg hello
<span class="ansi32">[
    {
        "argument": "hello"
    }
]</span>

<span class="ansi34">=== Run view with two arguments ===</span>
&gt;encapsia run view walkthrough_test test_two_args "hello" " world"
<span class="ansi32">[
    {
        "test_two_args": "hello world"
    }
]</span>

<span class="ansi34">=== Run view with no arguments to return meta ===</span>
&gt;encapsia run view walkthrough_test test_only_meta
<span class="ansi32">[
    {
        "test_only_meta": {
            "capabilities": [
                "superuser"
            ],
            "device": null,
            "email": "system@root.encapsia.com",
            "expires_at": "2025-04-01T09:53:00.437283+00:00",
            "id": 20906,
            "issued_at": "2024-04-01T09:53:00.437283+00:00",
            "name": "Root Superuser",
            "namespace": "walkthrough_test",
            "notification_token": null,
            "role": null,
            "role_alias": null,
            "site_id": "",
            "token": "ea3fcb1e96134a9eb2f3e0679e493dad",
            "url": "https://localhost.icethree.com/v1/views/walkthrough_test/test_only_meta"
        }
    }
]</span>

<span class="ansi34">=== Run view with one optional argument ===</span>
&gt;encapsia run view walkthrough_test test_one_optional_arg
<span class="ansi32">[
    {
        "test_one_optional_arg": 1000
    }
]</span>
&gt;encapsia run view walkthrough_test test_one_optional_arg limit=999
<span class="ansi32">[
    {
        "test_one_optional_arg": 999
    }
]</span>

<span class="ansi34">=== Run view with mixture of argument types ===</span>
&gt;encapsia run view walkthrough_test test_mixture hello limit=123
<span class="ansi32">[
    {
        "test_mixture": {
            "arg1": "hello",
            "limit": 123,
            "meta": {
                "capabilities": [
                    "superuser"
                ],
                "device": null,
                "email": "system@root.encapsia.com",
                "expires_at": "2025-04-01T09:53:00.437283+00:00",
                "id": 20906,
                "issued_at": "2024-04-01T09:53:00.437283+00:00",
                "name": "Root Superuser",
                "namespace": "walkthrough_test",
                "notification_token": null,
                "role": null,
                "role_alias": null,
                "site_id": "",
                "token": "ea3fcb1e96134a9eb2f3e0679e493dad",
                "url": "https://localhost.icethree.com/v1/views/walkthrough_test/test_mixture/hello?limit=123"
            }
        }
    }
]</span>

<span class="ansi34">=== Run view which returns CSV directly ===</span>
&gt;encapsia run view --post walkthrough_test example_view_function_as_csv_file
<span class="ansi32">"x,y\n\"1\",\"2\"\n\"3\",\"4\"\n"</span>

<span class="ansi34">=== Run view which populates table from CSV file ===</span>
&gt;encapsia run view --post walkthrough_test example_create_and_populate_table --upload treaties.csv
<span class="ansi32">[
    {
        "n_records": 4
    }
]</span>

<span class="ansi34">=== Run view and use save as ===</span>
&gt;encapsia run view walkthrough_test test_one_optional_arg --save-as=/tmp/test_view_download.json
<span class="ansi33">Response saved to: /tmp/test_view_download.json (mime_type=application/json)</span>
&gt;echo -n '[{"test_one_optional_arg": 1000}]'
&gt;diff -s /tmp/test_view_download.json -
Files /tmp/test_view_download.json and - are identical
&gt;rm /tmp/test_view_download.json

<span class="ansi34">=== Run view which returns CSV directly and use save as ===</span>
&gt;encapsia run view --post walkthrough_test example_view_function_as_csv_file --save-as=/tmp/test_view_download.csv
<span class="ansi33">Response saved to: /tmp/test_view_download.csv (mime_type=text/csv; charset=UTF-8)</span>
&gt;cat /tmp/test_view_download.csv
x,y
"1","2"
"3","4"
&gt;rm /tmp/test_view_download.csv

<span class="ansi34">=== Run basic test task function ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function name=tim
<span class="ansi33">Running task walkthrough_test.test_module.test_function</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"hello tim"</span>

<span class="ansi34">=== Run basic test task function and save result to file ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function --save-as /tmp/encapsia_test_save_from_task.txt name=tim
<span class="ansi33">Running task walkthrough_test.test_module.test_function</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Response saved to: /tmp/encapsia_test_save_from_task.txt (mime_type=application/json)</span>
&gt;echo $(cat /tmp/encapsia_test_save_from_task.txt)
"hello tim"
&gt;rm /tmp/encapsia_test_save_from_task.txt

<span class="ansi34">=== Run basic test task function with blank argument ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function name=
<span class="ansi33">Running task walkthrough_test.test_module.test_function</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"hello "</span>

<span class="ansi34">=== Run test task function written with fixed arguments ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_fixed_args name=tim
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_fixed_args</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"hello tim"</span>

<span class="ansi34">=== Run test task function accepting any arguments ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_any_args a=1 b=2 c=3
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_any_args</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">{
    "a": "1",
    "b": "2",
    "c": "3",
    "meta": {
        "capabilities": [
            "superuser"
        ],
        "device": null,
        "email": "system@root.encapsia.com",
        "expires_at": "2024-04-01T10:07:37.546572+00:00",
        "id": 20906,
        "issued_at": "2024-04-01T09:57:37.546572+00:00",
        "name": "Root Superuser",
        "namespace": "walkthrough_test",
        "notification_token": null,
        "role": null,
        "role_alias": null,
        "site_id": "",
        "token": "ccd1d250dc2b4824a2ef9ab6edca2ade",
        "url": "https://localhost.icethree.com/v1/tasks/walkthrough_test/test_module.test_function_with_any_args?a=1&amp;b=2&amp;c=3"
    }
}</span>

<span class="ansi34">=== Run test task function which only takes meta as a fixed argument ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_meta_as_fixed_arg
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_meta_as_fixed_arg</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">{
    "capabilities": [
        "superuser"
    ],
    "device": null,
    "email": "system@root.encapsia.com",
    "expires_at": "2024-04-01T10:07:38.235183+00:00",
    "id": 20906,
    "issued_at": "2024-04-01T09:57:38.235183+00:00",
    "name": "Root Superuser",
    "namespace": "walkthrough_test",
    "notification_token": null,
    "role": null,
    "role_alias": null,
    "site_id": "",
    "token": "f4fa9afd1b594af7a9782da3d5e95e8d",
    "url": "https://localhost.icethree.com/v1/tasks/walkthrough_test/test_module.test_function_with_meta_as_fixed_arg"
}</span>

<span class="ansi34">=== Run task function with uploaded text data. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.txt
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"I've been uploaded from a file!"</span>

<span class="ansi34">=== Run task function with uploaded json data. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.json
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">{
    "name": "Father Christmas"
}</span>

<span class="ansi34">=== Run task function with uploaded jpg data. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.jpg
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"\ufffd\ufffd\ufffd\ufffd\u0000C\u0000\u0003\u0002\u0002\u0002\u0002\u0002\u0003\u0002\u0002\u0002\u0003\u0003\u0003\u0003\u0004\u0006\u0004\u0004\u0004\u0004\u0004\b\u0006\u0006\u0005\u0006\t\b\n\n\t\b\t\t\n\f\u000f\f\n\u000b\u000e\u000b\t\t\r\u0011\r\u000e\u000f\u0010\u0010\u0011\u0010\n\f\u0012\u0013\u0012\u0010\u0013\u000f\u0010\u0010\u0010\ufffd\ufffd\u0000\u000b\b\u0000\u0001\u0000\u0001\u0001\u0001\u0011\u0000\ufffd\ufffd\u0000\u0006\u0000\u0010\u0010\u0005\ufffd\ufffd\u0000\b\u0001\u0001\u0000\u0000?\u0000\ufffd\ufffd \ufffd\ufffd"</span>

<span class="ansi34">=== Run task function with uploaded json data. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.json
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">{
    "name": "Father Christmas"
}</span>

<span class="ansi34">=== Run task function with uploaded jpg data. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.jpg
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"\ufffd\ufffd\ufffd\ufffd\u0000C\u0000\u0003\u0002\u0002\u0002\u0002\u0002\u0003\u0002\u0002\u0002\u0003\u0003\u0003\u0003\u0004\u0006\u0004\u0004\u0004\u0004\u0004\b\u0006\u0006\u0005\u0006\t\b\n\n\t\b\t\t\n\f\u000f\f\n\u000b\u000e\u000b\t\t\r\u0011\r\u000e\u000f\u0010\u0010\u0011\u0010\n\f\u0012\u0013\u0012\u0010\u0013\u000f\u0010\u0010\u0010\ufffd\ufffd\u0000\u000b\b\u0000\u0001\u0000\u0001\u0001\u0001\u0011\u0000\ufffd\ufffd\u0000\u0006\u0000\u0010\u0010\u0005\ufffd\ufffd\u0000\b\u0001\u0001\u0000\u0000?\u0000\ufffd\ufffd \ufffd\ufffd"</span>

<span class="ansi34">=== Run task function with uploaded text data and use save as. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.txt --save-as=/tmp/example_data.txt
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Response saved to: /tmp/example_data.txt (mime_type=application/json)</span>
&gt;echo -n "\"$(cat example_data.txt)\""
&gt;diff -s /tmp/example_data.txt -
Files /tmp/example_data.txt and - are identical
&gt;rm /tmp/example_data.txt

<span class="ansi34">=== Run task function with uploaded json data and use save as. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.json --save-as=/tmp/example_data.json
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Response saved to: /tmp/example_data.json (mime_type=application/json)</span>
&gt;diff -s example_data.json /tmp/example_data.json
Files example_data.json and /tmp/example_data.json are identical
&gt;rm /tmp/example_data.json

<span class="ansi34">=== Run task function with uploaded jpg data and use save as. ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data --upload=example_data.jpg --save-as=/tmp/example_data.jpg
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Response saved to: /tmp/example_data.jpg (mime_type=image/jpeg)</span>
&gt;diff -s example_data.jpg /tmp/example_data.jpg
Files example_data.jpg and /tmp/example_data.jpg are identical
&gt;rm /tmp/example_data.jpg

<span class="ansi34">=== Run task function which takes no arguments. This *should* fail!!! ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_no_args
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_no_args</span><span class="ansi33">.</span><span class="ansi31">
Status: failed</span>
<span class="ansi31">Task walkthrough_test/80603610-147e-4507-ae69-1581e3198ed8 raised an exception (log id 581145bcd8ae4011a4b9e0be88daca58)</span>
Aborted!
&gt;true

<span class="ansi34">=== Run task function with fixed arg and no meta. This *should* fail!!! ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_single_arg_and_no_meta name=tim
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_single_arg_and_no_meta</span><span class="ansi33">.</span><span class="ansi31">
Status: failed</span>
<span class="ansi31">Task walkthrough_test/603c432a-33c5-4c20-91f4-d6363b98fdd1 raised an exception (log id 9480b1de35db44a58e1c748dc6bf216d)</span>
Aborted!
&gt;true

<span class="ansi34">=== Run task function with arg and no meta. This *should* fail!!! ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_with_single_kwarg name=tim
<span class="ansi33">Running task walkthrough_test.test_module.test_function_with_single_kwarg</span><span class="ansi33">.</span><span class="ansi31">
Status: failed</span>
<span class="ansi31">Task walkthrough_test/12ac8473-5cdb-40c9-823d-03d158ea5510 raised an exception (log id 7a602bb588ea4e7382e4a6a6a18b09b0)</span>
Aborted!
&gt;true

<span class="ansi34">=== Run task function expecting uploaded data but without any data. This *should* fail!!! ===</span>
&gt;encapsia run task walkthrough_test test_module.test_function_for_posted_data
<span class="ansi33">Running task walkthrough_test.test_module.test_function_for_posted_data</span><span class="ansi33">.</span><span class="ansi31">
Status: failed</span>
<span class="ansi31">Task walkthrough_test/888717f1-cc1c-4082-8660-fc6ee0306ca3 raised an exception (log id 9f6ce281e53442f296b8c7b7094a533a)</span>
Aborted!
&gt;true

<span class="ansi34">=== Run job function and return (JSON) result ===</span>
&gt;encapsia run job walkthrough_test test_module.test_function_for_a_job name=Tim
<span class="ansi33">Running job walkthrough_test.test_module.test_function_for_a_job</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi32">"Hello Tim"</span>

<span class="ansi34">=== Run job function and save (JSON) result ===</span>
&gt;encapsia run job walkthrough_test test_module.test_function_for_a_job name=Tim --save-as=/tmp/test_job_result.json
<span class="ansi33">Running job walkthrough_test.test_module.test_function_for_a_job</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">.</span><span class="ansi33">Done</span>
<span class="ansi33">Response saved to: /tmp/test_job_result.json (mime_type=application/json)</span>
&gt;echo $(cat /tmp/test_job_result.json)
"Hello Tim"
&gt;rm /tmp/test_job_result.json

<span class="ansi34">=== Add superuser ===</span>
&gt;encapsia users add-superuser tcorbettclark@cmedtechnology.com Timothy Corbett-Clark
<span class="ansi32">Superuser tcorbettclark@cmedtechnology.com successfully created</span>

<span class="ansi34">=== List all superusers ===</span>
&gt;encapsia users list --super-users
<span class="ansi32">[Super users]</span>
<span class="ansi32">email                             first_name    last_name
--------------------------------  ------------  -------------
johndoe@example.com               Johen         Doe
johndoe@example.org               John          Doe
ltar-demo@encapsia.com            LTAR          Demo
ltar-reviewer@encapsia.com        LTAR          Demo
user1@cmedtechnology.com          User          One
tcorbettclark@cmedtechnology.com  Timothy       Corbett-Clark</span>
<span class="ansi32"></span>

<span class="ansi34">=== Delete superuser ===</span>
&gt;encapsia users delete tcorbettclark@cmedtechnology.com
<span class="ansi32">User tcorbettclark@cmedtechnology.com successfully deleted</span>

<span class="ansi34">=== Add system user ===</span>
&gt;encapsia users add-systemuser a-description cap1,cap2,cap3
<span class="ansi32">System user and role for a-description successfully created</span>

<span class="ansi34">=== List all system users ===</span>
&gt;encapsia users list --system-users
<span class="ansi32">[System users]</span>
<span class="ansi32">email                                 description       capabilities
------------------------------------  ----------------  --------------------------------------------------------------------------------------------------
system@walkthrough_test.encapsia.com  Walkthrough_test  ('login.transfer.from', 'login.again', 'values.read', 'values.write', 'task.run.walkthrough_test')
system@a-description.encapsia.com     A-description     ('cap1', 'cap2', 'cap3')</span>
<span class="ansi32"></span>

<span class="ansi34">=== Delete system user ===</span>
&gt;encapsia users delete system@a-description.encapsia.com
<span class="ansi32">User system@a-description.encapsia.com successfully deleted</span>

<span class="ansi34">=== List all users ===</span>
&gt;encapsia users list --all-users
<span class="ansi32">[All users]</span>
<span class="ansi32">email                                 first_name    last_name         role                       enabled    is_site_user
------------------------------------  ------------  ----------------  -------------------------  ---------  --------------
johndoe@example.com                   Johen         Doe               Superuser                  True       False
johndoe@example.org                   John          Doe               Superuser                  True       False
ltar-demo@encapsia.com                LTAR          Demo              Superuser                  True       False
ltar-reviewer@encapsia.com            LTAR          Demo              Superuser                  True       False
system@walkthrough_test.encapsia.com  System        Walkthrough_test  System - Walkthrough_test  True       False
user1@cmedtechnology.com              User          One               Superuser                  True       False</span>
<span class="ansi32"></span>

<span class="ansi34">=== Export all users and roles ===</span>
&gt;encapsia users export /tmp/test_encapsia_users.toml
<span class="ansi32">Exported 6 users and 3 roles to /tmp/test_encapsia_users.toml</span>
&gt;cat /tmp/test_encapsia_users.toml
[[users]]
email = "johndoe@example.com"
first_name = "Johen"
last_name = "Doe"
is_site_user = false
role = "Superuser"
enabled = true

[[users]]
email = "johndoe@example.org"
first_name = "John"
last_name = "Doe"
is_site_user = false
role = "Superuser"
enabled = true

[[users]]
email = "ltar-demo@encapsia.com"
first_name = "LTAR"
last_name = "Demo"
is_site_user = false
role = "Superuser"
enabled = true

[[users]]
email = "ltar-reviewer@encapsia.com"
first_name = "LTAR"
last_name = "Demo"
is_site_user = false
role = "Superuser"
enabled = true

[[users]]
email = "system@walkthrough_test.encapsia.com"
first_name = "System"
last_name = "Walkthrough_test"
is_site_user = false
role = "System - Walkthrough_test"
enabled = true

[[users]]
email = "user1@cmedtechnology.com"
first_name = "User"
last_name = "One"
is_site_user = false
role = "Superuser"
enabled = true

[[roles]]
name = "System - Walkthrough_test"
alias = "System - Walkthrough_test"
capabilities = [ "login.transfer.from", "login.again", "values.read", "values.write", "task.run.walkthrough_test",]

[[roles]]
name = "Superuser"
alias = "Superuser"
capabilities = [ "superuser",]

[[roles]]
name = "System - A-description"
alias = "System - A-description"
capabilities = [ "cap1", "cap2", "cap3",]


<span class="ansi34">=== Import users and roles ===</span>
&gt;encapsia users import /tmp/test_encapsia_users.toml
<span class="ansi32">Imported 6 users and 3 roles from /tmp/test_encapsia_users.toml</span>
&gt;rm /tmp/test_encapsia_users.toml

<span class="ansi36">&lt;&lt;&lt; End of tests &gt;&gt;&gt;</span>

</pre>
</body>

</html>
